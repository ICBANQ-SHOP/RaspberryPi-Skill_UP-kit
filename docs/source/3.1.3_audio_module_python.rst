3.1.3 Audio Module
=====================

Introduction
-----------------

Let's try to play local audio files on raspberry pi.

Components
----------------

.. image:: media/audio2.png
  :width: 700
  :align: center


Experimental Procedures
------------------------------

**Step 1:** Build the circuit.

.. image:: media/4.1.4fritzing.png
    :width: 800
    :align: center   

The audio connector we have equipped has 3 contacts. 
From the tip to the root, the left channel, the right channel, and the power ground are in sequence. 
Among them, the left channel is connected to the red DuPont wire, the right channel is connected to the white DuPont wire, and the power ground is connected to the black DuPont wire.
  
.. image:: media/audio1.png
    :width: 300
    :align: center
  
Plug the 3.5mm audio jack into the Raspberry Pi.
  
.. image:: media/audio4.png
    :width: 400
    :align: center


.. note::

    If your speaker have no sound, it may be because the Raspberry Pi has selected the wrong audio output, the correct one should be **Headphones**, please refer to :ref:`Change Audio Output` for more details.


**Step 2:** Get into the folder of the code.

.. code-block::

    cd /home/pi/raphael-kit/python/

**Step 3:** Run.

.. code-block::

    sudo python3 3.1.3_AudioModule.py

After the code runs, raspberry pi will play the music.

**Code**

.. code-block:: python

    from pygame import mixer

    mixer.init()
    
    def main():
        mixer.music.load('/home/pi/raphael-kit/music/my_music.mp3')
        mixer.music.set_volume(0.7)
        mixer.music.play()
        while True:
            pass# Don't do anything.
    
    def destroy():
        mixer.music.stop()
    
    if __name__ == '__main__':
        try:
            main()
        except KeyboardInterrupt:
            destroy()

**Code Explanation**

.. code-block:: python

    from pygame import mixer

    mixer.init()

Import the Mixer method in the pygame library and initialize the method.

.. code-block:: python

    mixer.music.load('/home/pi/raphael-kit/music/my_music.mp3')
    mixer.music.set_volume(0.7)
    mixer.music.play()


This code reads the ``my_music.mp3`` file in the ``/home/pi/raphael-kit/music`` directory and sets the volume to 0.7. 
The raspberry pi will start playing audio When ``mixer.music.play()`` is called.

If you want to upload other music files to raspberry pi, you can refer to :ref:`Use Filezilla Software`.

.. note::
    Setting range of the volume is 0~1.

.. code-block:: python

    mixer.music.stop()

Calling ``mixer.music.stop()`` will stop playing audio.
In addition, you can also pause with ``mixer.music.pause()`` and continue with ``mixer.music.unpause()``.

**Phenomenon Picture**
------------------------

.. image:: media/3.1.3audio.jpg
   :align: center
