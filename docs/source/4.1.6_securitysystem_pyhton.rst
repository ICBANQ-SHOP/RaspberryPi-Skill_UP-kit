4.1.6 Security System
~~~~~~~~~~~~~~~~~~~~~~~~~~

Introduction
-----------------

Let's try to assemble a simple Security system with raspberry pi.

Components
----------------

.. image:: media/3.1.20components.png
  :width: 800
  :align: center

**Schematic Diagram**
-----------------------

============ ======== ======== ===
T-Board Name physical wiringPi BCM
GPIO17       Pin 11   0        17
GPIO27       Pin 13   2        27
============ ======== ======== ===

.. image:: media/3.1.20_schematic.png
   :width: 600
   :align: center

Experimental Procedures
------------------------------

**Step 1:** Build the circuit.

.. image:: media/3.1.20fritzing.png
  :width: 800
  :align: center

**Step 2:** Get into the folder of the code.

.. code-block::

    cd /home/pi/raphael-kit/python/

**Step 3:** Run.

.. code-block::

    sudo python3 4.1.6_Securitysystem.py

当代码运行之后，干簧管会因为磁铁的影响处于开关闭合的状态，此时蜂鸣器不会发声。
拿走磁铁之后，干簧管失去磁场影响，开关断开，蜂鸣器便发出声音警报。


**Code Explanation**

.. code-block:: python

    def loop():
        while True:
            if GPIO.input(ReedPin) == 0:
                GPIO.output(BeepPin, GPIO.HIGH)
            else:
                GPIO.output(BeepPin, GPIO.LOW)
                time.sleep(0.1)
                GPIO.output(BeepPin, GPIO.HIGH)
                time.sleep(0.1)

设置一个循环函数，当磁铁靠近时ReedPin为0，passive buzzer没有被square waves驱动，
蜂鸣器不工作；当磁铁被拿开时ReedPin为1，BeepPin循环给予高低电平形成square waves来驱动
passive buzzer，蜂鸣器发出声音。


**Phenomenon Picture**
------------------------

.. image:: media/4.1.6_security.jpg
   :align: center


